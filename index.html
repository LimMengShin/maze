<style>#controls,#u,body,canvas{margin:10px;text-align:center;font-family:Arial}canvas{border:solid}</style><h1>Maze</h1><p>Press and hold the WASD keys to navigate through the maze!</p><div id="controls"><label for="d">Difficulty:</label> <select id="d"><option value="e">Easy</option><option value="m" selected="selected">Medium</option><option value="h">Hard</option><option value="i">Impossible</option></select></div><canvas id="m"></canvas><div id="u">Reach the green square!</div><div id="p">Time Left: <span id="b"></span> seconds</div><div id="j">Total Score: <span id="k">0</span></div><script>var s,b,rows,m,w,n,p,j,pressedKeys=new Set,z=(id=e=>document.getElementById(e))("m"),e=z.getContext("2d"),d=id("d"),a=id("b"),c=id("k"),k={w:[0,-1],s:[0,1],a:[-1,0],d:[1,0]};function h(){z.width=z.height=rows*s,e.clearRect(0,0,z.width,z.height),m.map((t,r)=>t.map((t,n)=>{e.fillStyle=t?"black":"white",e.fillRect(n*s,r*s,s,s)})),e.fillStyle="red",e.fillRect(w.x*s,w.y*s,s,s),e.fillStyle="green",e.fillRect(n.x*s,n.y*s,s,s)}function mp(){pressedKeys.forEach(key=>{let t=w.x,r=w.y,[dx,dy]=k[key]||[],t2=t+dx,r2=r+dy;0<=t2&&0<=r2&&t2<rows&&r2<rows&&0===m[r2][t2]&&(w.x=t2,w.y=r2)}),h(),w.x===n.x&&w.y===n.y&&(clearInterval(p),clearInterval(j),document.getElementById("u").textContent="You reached the goal! :yay:",c.textContent=(b+=parseInt(c.textContent)))}function init(){clearInterval(p),clearInterval(j);var e=d.value;[s,b,rows]=({e:[55,10,11],m:[29,30,21],h:[15,60,41],i:[10,120,61]})[e=d.value],n={x:rows-1,y:rows-1},w={x:0,y:0},m=Array(rows).fill().map(()=>Array(rows).fill(1)),function e(t,r){m[r][t]=0;Object.values(k).sort(()=>Math.random()-.5).forEach(([dx,dy])=>{var t2=t+2*dx,r2=r+2*dy;0<=t2&&0<=r2&&t2<rows&&r2<rows&&1===m[r2][t2]&&(m[r+dy][t+dx]=0,e(t2,r2))})}(w.x,w.y),m[n.y][n.x]=0,h(),a.textContent=b,document.getElementById("u").textContent="Reach the green square!",p=setInterval(()=>{b>0?(b--,a.textContent=b):(clearInterval(p),document.getElementById("u").textContent="Time's up! Try again.")},1e3),j=setInterval(mp,50)}["keydown","keyup"].map(e=>document.addEventListener(e,k=>pressedKeys[`${e==="keydown"?"add":"delete"}`](k.key))),d.onchange=init,init()</script>